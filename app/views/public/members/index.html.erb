<div class="row mb-5">
  <div class="col-xl-12 col-md-12">
    <h4 class="mt-5 mb-5 font-weight-bold"><i class="fas fa-users"> ランキング一覧</i></h4>
    <ul class="text-center nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item bg-light", style="width:20%;">
        <a class="nav-link active link-text" id="new-tab" data-toggle="tab" href="#new" role="tab" aria-controls="new" aria-selected="false">新着</a>
      </li>
      <li class="nav-item bg-light", style="width:20%;">
        <a class="nav-link link-text" id="members-tab" data-toggle="tab" href="#members" role="tab" aria-controls="members" aria-selected="true">回答数ランキング</a>
      </li>
      <li class="nav-item bg-light", style="width:20%;">
        <a class="nav-link link-text" id="member-tab" data-toggle="tab" href="#member" role="tab" aria-controls="member" aria-selected="true">質問数ランキング</a>
      </li>
      <li class="nav-item bg-light", style="width:20%;">
        <a class="nav-link link-text" id="qlikes-tab" data-toggle="tab" href="#qlikes" role="tab" aria-controls="qlikes" aria-selected="false">質問いいねランキング</a>
      </li>
      <li class="nav-item bg-light", style="width:20%;">
        <a class="nav-link link-text" id="alikes-tab" data-toggle="tab" href="#alikes" role="tab" aria-controls="alikes" aria-selected="false">回答いいねランキング</a>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <p class="mt-4 mb-4">全ユーザー数：<%= @members.count %>人</p>
      <div class="tab-pane fade show active" id="new" role="tabpanel" aria-labelledby="new-tab">
        <% @members.each do |member| %>
          <div class="d-flex border rounded mx-auto mt-3 pt-2 pb-2">
            <div class="col-md-1 text-center pt-3 pr-0">
              <div class="border-right"><%=member.created_at.strftime('%Y/%m/%d %H:%M') %><br>start</div>
            </div>
            <div class="col-md-2 border-right pr-0 ml-0 pt-3">
              <%= link_to member_path(member), class:"link-text d-flex align-items-center" do %>
                <div class="pr-0"><%= attachment_image_tag member, :image, size:"30x30", fallback:"no_image_icon.jpg"%></div>
                <div class="ml-3"><%= member.name%></div>
              <% end %>
            </div>
            <div class="col-md-1 border-right d-flex text-center pl-0 pr-0">
              <div class="col-md-12">
                <p class="small border border-primary rounded w-100">高評価</p>
                <h5><%= member.total_likes(member) %></h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="small border border-primary rounded">フォロー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.follower.count %>
                  <% end %>
                </h5>
              </div>
              <div class="col-md-6 ml-2">
                <p class="small border border-primary rounded">フォロワー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.followed.count %>
                  <% end %>
                </h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="mb-0"><%= image_tag 'q_icon.png', size: "27x30" %></p>
                <h5><%= member.questions.count %></h5>
              </div>
              <div class="col-md-6">
                <p class="mb-0"><%= image_tag 'a_icon.png', size: "27x30" %></p>
                <h5><%= member.answers.count %></h5>
              </div>
            </div>
            <div class="col-md-2 d-flex text-center">
              <% if member_signed_in? %>
                <% if current_member.id == member.id %>
                  <%= link_to "プロフィールへ", member_path(member), method: :get, class:"btn btn-outline-secondary mt-3", style:"width:100%; height:50%;" %>
                <% else %>
                  <% if current_member.following?(member) %>
                    <%= link_to 'フォロー外す', unfollow_path(member), method: :post, class:"btn btn-danger mt-3", style:"width:100%; height:50%;" %>
                  <% else %>
                    <%= link_to "フォローする", follow_path(member), method: :post, class:"btn btn-primary mt-3", style:"width:100%; height:50%;" %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mb-5 tab-pane fade " id="members" role="tabpanel" aria-labelledby="members-tab">
        <% @member_all.each do |member| %>
          <div class="d-flex border rounded mx-auto mt-3 pt-2 pb-2">
            <div class="col-md-2 border-right pr-0 ml-0 pt-3">
              <%= link_to member_path(member), class:"link-text d-flex align-items-center" do %>
                <div class="pr-0"><%= attachment_image_tag member, :image, size:"30x30", fallback:"no_image_icon.jpg"%></div>
                <div class="ml-3"><%= member.name%></div>
              <% end %>
            </div>
            <div class="col-md-1 border-right d-flex text-center pl-0 pr-0">
              <div class="col-md-12">
                <p class="small border border-primary rounded w-100">高評価</p>
                <h5><%= member.total_likes(member) %></h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="small border border-primary rounded">フォロー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.follower.count %>
                  <% end %>
                </h5>
              </div>
              <div class="col-md-6 ml-2">
                <p class="small border border-primary rounded">フォロワー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.followed.count %>
                  <% end %>
                </h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="mb-0"><%= image_tag 'q_icon.png', size: "27x30" %></p>
                <h5><%= member.questions.count %></h5>
              </div>
              <div class="col-md-6">
                <p class="mb-0"><%= image_tag 'a_icon.png', size: "27x30" %></p>
                <h5><%= member.answers.count %></h5>
              </div>
            </div>
            <div class="col-md-2 d-flex text-center">
              <% if member_signed_in? %>
                <% if current_member.id == member.id %>
                  <%= link_to "プロフィールへ", member_path(member), method: :get, class:"btn btn-outline-secondary mt-3", style:"width:100%; height:50%;" %>
                <% else %>
                  <% if current_member.following?(member) %>
                    <%= link_to 'フォロー外す', unfollow_path(member), method: :post, class:"btn btn-danger mt-3", style:"width:100%; height:50%;" %>
                  <% else %>
                    <%= link_to "フォローする", follow_path(member), method: :post, class:"btn btn-primary mt-3", style:"width:100%; height:50%;" %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mb-5 tab-pane fade " id="member" role="tabpanel" aria-labelledby="member-tab">
        <% @member_alls.each do |member| %>
          <div class="d-flex border rounded mx-auto mt-3 pt-2 pb-2">
            <div class="col-md-2 border-right pr-0 ml-0 pt-3">
              <%= link_to member_path(member), class:"link-text d-flex align-items-center" do %>
                <div class="pr-0"><%= attachment_image_tag member, :image, size:"30x30", fallback:"no_image_icon.jpg"%></div>
                <div class="ml-3"><%= member.name%></div>
              <% end %>
            </div>
            <div class="col-md-1 border-right d-flex text-center pl-0 pr-0">
              <div class="col-md-12">
                <p class="small border border-primary rounded w-100">高評価</p>
                <h5><%= member.total_likes(member) %></h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="small border border-primary rounded">フォロー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.follower.count %>
                  <% end %>
                </h5>
              </div>
              <div class="col-md-6 ml-2">
                <p class="small border border-primary rounded">フォロワー</p>
                <h5>
                  <%= link_to connections_member_path(member) do %>
                    <%= member.followed.count %>
                  <% end %>
                </h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="mb-0"><%= image_tag 'q_icon.png', size: "27x30" %></p>
                <h5><%= member.questions.count %></h5>
              </div>
              <div class="col-md-6">
                <p class="mb-0"><%= image_tag 'a_icon.png', size: "27x30" %></p>
                <h5><%= member.answers.count %></h5>
              </div>
            </div>
            <div class="col-md-2 d-flex text-center">
              <% if member_signed_in? %>
                <% if current_member.id == member.id %>
                  <%= link_to "プロフィールへ", member_path(member), method: :get, class:"btn btn-outline-secondary mt-3", style:"width:100%; height:50%;" %>
                <% else %>
                  <% if current_member.following?(member) %>
                    <%= link_to 'フォロー外す', unfollow_path(member), method: :post, class:"btn btn-danger mt-3", style:"width:100%; height:50%;" %>
                  <% else %>
                    <%= link_to "フォローする", follow_path(member), method: :post, class:"btn btn-primary mt-3", style:"width:100%; height:50%;" %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mb-5 tab-pane fade" id="qlikes" role="tabpanel" aria-labelledby="qlikes-tab">
        <% Question.all.ranking.each.with_index(1) do |rank, i| %>
          <div class="d-flex border rounded mx-auto mt-3 pt-2 pb-2">
            <div class="col-md-1 text-center pt-4 pr-0">
              <div class="border-right"><%= i %>位</div>
            </div>
            <div class="col-md-2 border-right pr-0 pt-3">
              <%= link_to member_path(rank), class:"link-text d-flex align-items-center" do %>
                <div class="ml-3"><%= rank.name %></div>
              <% end %>
            </div>
            <div class="col-md-1 border-right d-flex text-center pl-0 pr-0">
              <div class="col-md-12">
                <p class="small border border-primary rounded w-100">高評価</p>
                <h5><%=rank.cnt%></h5>
              </div>
            </div>
            <div class="col-md-3 border-right d-flex text-center">
              <div class="col-md-6 border-right">
                <p class="small border border-primary rounded">回答数</p>
                <h5>
                  <%= link_to member_path(rank) do %>
                   <%= rank.answers.count %>
                  <% end %>
                </h5>
              </div>
            </div>
            <div class="col-md-4 pl-0 pr-0 ml-0">
              <% if member_signed_in? %>
                  <% unless current_member.name == rank.name %>
                    <% if current_member.following?(rank) %>
                      <%= link_to 'フォロー外す', unfollow_path(rank), method: :post, class:"btn btn-danger mt-3", style:"width:100%; font-size:4px;" %>
                    <% else %>
                      <%= link_to "フォローする", follow_path(rank), method: :post, class:"btn btn-primary mt-3 ", style:"width:100%; font-size:4px;" %>
                    <% end %>
                  <% else %>
                    <%= link_to "マイページへ", member_path(rank), method: :get, class:"btn btn-outline-secondary mt-3", style:"width:100%; font-size:4px;" %>
                  <% end %>
                <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mb-5 tab-pane fade" id="alikes" role="tabpanel" aria-labelledby="alikes-tab">
          <% Answer.all.a_ranking.each.with_index(1) do |rank, i| %>
            <div class="d-flex border rounded mx-auto mt-3 pt-2 pb-2">
              <div class="col-md-1 text-center pt-4 pr-0">
                <div class="border-right"><%= i %>位</div>
              </div>
              <div class="col-md-2 border-right pr-0 pt-3">
                <%= link_to member_path(rank), class:"link-text d-flex align-items-center" do %>
                  <div class="ml-3"><%= rank.name %></div>
                <% end %>
              </div>
              <div class="col-md-1 border-right d-flex text-center pl-0 pr-0">
                <div class="col-md-12">
                  <p class="small border border-primary rounded w-100">高評価</p>
                  <h5><%=rank.cnt%></h5>
                </div>
              </div>
              <div class="col-md-3 border-right d-flex text-center">
                <div class="col-md-6 border-right">
                  <p class="small border border-primary rounded">フォロー</p>
                  <h5>
                    <%= link_to connections_member_path(rank) do %>
                    <% end %>
                  </h5>
                </div>
                <div class="col-md-6 ml-2">
                  <p class="small border border-primary rounded">フォロワー</p>
                  <h5>
                    <%= link_to connections_member_path(rank) do %>
                      <!--<= rank.followed.count %>-->
                    <% end %>
                  </h5>
                </div>
              </div>
              <div class="col-md-4 pl-0 pr-0 ml-0">
                <% if member_signed_in? %>
                    <% unless current_member.name == rank.name %>
                      <% if current_member.following?(rank) %>
                        <%= link_to 'フォロー外す', unfollow_path(rank), method: :post, class:"btn btn-danger mt-3", style:"width:100%; font-size:4px;" %>
                      <% else %>
                        <%= link_to "フォローする", follow_path(rank), method: :post, class:"btn btn-primary mt-3 ", style:"width:100%; font-size:4px;" %>
                      <% end %>
                    <% else %>
                      <%= link_to "マイページへ", member_path(rank), method: :get, class:"btn btn-outline-secondary mt-3", style:"width:100%; font-size:4px;" %>
                    <% end %>
                  <% end %>
              </div>
            </div>
          <% end %>
      </div>
    </div>
  </div>
</div>